import streamlit as st
import pandas as pd
import numpy as np
import matplotlib.pyplot as plt

# é¡¯ç¤º JSON æ ¼å¼çš„è¨Šæ¯
data = {"message": "Hello, Dockerized Flask!"}
st.json(data)

st.set_page_config(page_title="Dockerized Streamlit")

IMG_TEST = [  #æ—è‚¯åœ–åƒ
[157,153,174,168,150,152,129,151,172,161,156,156],
[155,182,163, 74, 76, 62, 33, 17,110,210,180,154],
[180,180, 50, 14, 34,  6, 10, 33, 48,106,150,181],
[206,109,  5,124,131,111,120,204,166, 15, 56,180],
[194, 64,137,251,237,239,210,220,227, 87, 71,201],
[172,106,207,233,233,214,220,239,228, 98, 74,206],
[198, 84,179,209,116,215,211,158,119, 75, 10,169],
[199, 97,166, 84, 10,168,134, 11, 31, 62, 22,148],
[199,168,191,193,158,227,178,143,182,106, 36,190],
[206,174,156,252,216,231,140,178,228, 43, 96,234],
[190,216,116,149,236,187, 86,150, 79, 38,218,241],
[190,224,147,100,227,210,127,102, 36,101,255,224],
[190,214,173, 66,103,143, 96, 50,  2,109,249,215],
[187,196,236, 75,  1, 81, 47,  0,  6,217,255,211],
[183,202,237,145,  0,  0, 12,108,200,138,243,236],
[196,206,123,207,177,121,123,200,176, 13, 96,218] ]

df = pd.DataFrame(IMG_TEST)
np_2D = np.array(IMG_TEST)

fig, ax = plt.subplots()
ax.imshow(np_2D, cmap="gray")
ax.axis("off")           # ä¸é¡¯ç¤ºåæ¨™è»¸ï¼ˆå¯é€‰ï¼‰

st.pyplot(fig)

# 1. å…¨å±€é¡µé¢é…ç½®
st.set_page_config(
    page_title="Sharingan Gray-Scale Demo",
    page_icon="ğŸŒ€",
    layout="wide",
)

# 2. ä¸»æ ‡é¢˜ä¸ç®€ä»‹
st.title("ğŸ”´ æ—è‚¯åœ–æ¼”ç¤º")
st.markdown(
    """
    è¿™ä¸ªç¤ºä¾‹ä½¿ç”¨ **Streamlit** + **Matplotlib**  
    å±•ç¤ºæ—è‚¯åƒç´ ç…§ç‰‡ï¼ŒåŒæ—¶æ”¯æŒè‡ªå®šä¹‰è‰²å½©æ˜ å°„å’Œæ•°æ®æ˜¾ç¤ºã€‚
    """
)

# 3. å´æ¬„ï¼šäº’å‹•å¼å…ƒä»¶
with st.sidebar:
    st.header("è¨­å®š")
    colormap = st.selectbox(
        "é¸æ“‡è‰²å½©æ˜ å°„ (colormap)", 
        ["gray", "viridis", "plasma", "inferno", "magma"]
    )
    show_df = st.checkbox("æ˜¾ç¤º DataFrame", value=False)
    st.markdown("---")
    st.write("Â© 2025 Asuka Liaw")

# 4. æ•¸æ“šæº–å‚™
IMG_TEST = [
    [157,153,174,168,150,152,129,151,172,161,156,156],
    [155,182,163, 74, 76, 62, 33, 17,110,210,180,154],
    [180,180, 50, 14, 34,  6, 10, 33, 48,106,150,181],
    [206,109,  5,124,131,111,120,204,166, 15, 56,180],
    [194, 64,137,251,237,239,210,220,227, 87, 71,201],
    [172,106,207,233,233,214,220,239,228, 98, 74,206],
    [198, 84,179,209,116,215,211,158,119, 75, 10,169],
    [199, 97,166, 84, 10,168,134, 11, 31, 62, 22,148],
    [199,168,191,193,158,227,178,143,182,106, 36,190],
    [206,174,156,252,216,231,140,178,228, 43, 96,234],
    [190,216,116,149,236,187, 86,150, 79, 38,218,241],
    [190,224,147,100,227,210,127,102, 36,101,255,224],
    [190,214,173, 66,103,143, 96, 50,  2,109,249,215],
    [187,196,236, 75,  1, 81, 47,  0,  6,217,255,211],
    [183,202,237,145,  0,  0, 12,108,200,138,243,236],
    [196,206,123,207,177,121,123,200,176, 13, 96,218],
]
np_2D = np.array(IMG_TEST)
df = pd.DataFrame(IMG_TEST)

# 5. ä¸»é é¢é›™æ¬„é¡¯ç¤º
col1, col2 = st.columns([1, 2])

with col1:
    st.subheader("åŸå§‹é»‘ç™½å½±åƒ")
    st.image(
        np_2D, 
        caption="åŸå§‹è³‡æ–™", 
        use_column_width=True, 
        clamp=True
    )
    if show_df:
        st.markdown("#### åŸå§‹æ•¸å€¼ (DataFrame)")
        st.dataframe(df, use_container_width=True)

with col2:
    st.subheader("Matplotlib æ¸²æŸ“")
    fig, ax = plt.subplots(figsize=(5, 5))
    ax.imshow(np_2D, cmap=colormap)
    ax.axis("off")
    st.pyplot(fig)
